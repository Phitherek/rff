<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class RFF::OutputReader - RDoc Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/output_reader.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-get_raw_buffer">#get_raw_buffer</a>
    
    <li ><a href="#method-i-gets">#gets</a>
    
    <li ><a href="#method-i-join_reading_thread">#join_reading_thread</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../RFF.html">RFF</a>
  
    <li><a href="../RFF/ArgumentError.html">RFF::ArgumentError</a>
  
    <li><a href="../RFF/AudioHandler.html">RFF::AudioHandler</a>
  
    <li><a href="../RFF/OutputReader.html">RFF::OutputReader</a>
  
    <li><a href="../RFF/ProcessingFailure.html">RFF::ProcessingFailure</a>
  
    <li><a href="../RFF/Processor.html">RFF::Processor</a>
  
    <li><a href="../RFF/VideoHandler.html">RFF::VideoHandler</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class RFF::OutputReader</h1>

  <div id="description" class="description">
    
<p>A class that reads the given IO stream and provides advanced reading
functions for it. It reads the given stream to the internal buffer in
separate thread and uses this buffer to provide reading functionality that
is not available in IO stream alone</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(io)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This constructor initializes the class instance with IO stream and starts
the stream reading thread</p>
<ul><li>
<p><em>io</em> - the IO stream to read from</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/output_reader.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span> <span class="ruby-identifier">io</span>
  <span class="ruby-ivar">@buffer</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-ivar">@writecount</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@readcount</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@eof</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@reading_thread</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">th</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">while</span> <span class="ruby-identifier">data</span> = <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value">10</span>)
      <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">data</span>
      <span class="ruby-ivar">@writecount</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@eof</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-get_raw_buffer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_raw_buffer</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method outputs the internal buffer without any additional processing</p>
          
          

          
          <div class="method-source-code" id="get_raw_buffer-source">
            <pre><span class="ruby-comment"># File lib/output_reader.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_raw_buffer</span>
  <span class="ruby-ivar">@buffer</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_raw_buffer-source -->
          
        </div>

        

        
      </div><!-- get_raw_buffer-method -->

    
      <div id="method-i-gets" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">gets</span><span
            class="method-args">(seps=["\n"])</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method provides an implementation of IO gets method for streams
containing lines with different line separators in some parts</p>
<ul><li>
<p><em>seps</em> - an array defining the line separators. Defaults to one,
default LF separator</p>
</li></ul>

<p>Outputs next line from the stream or “EOF\n” when the stream reaches its
end</p>
          
          

          
          <div class="method-source-code" id="gets-source">
            <pre><span class="ruby-comment"># File lib/output_reader.rb, line 28</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gets</span> <span class="ruby-identifier">seps</span>=[<span class="ruby-string">&quot;\n&quot;</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@writecount</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@readcount</span>
    <span class="ruby-identifier">line</span> = <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">c</span> = <span class="ruby-ivar">@buffer</span>[<span class="ruby-ivar">@readcount</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-ivar">@readcount</span> = <span class="ruby-ivar">@readcount</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
        <span class="ruby-identifier">line</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">c</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">seps</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">c</span>)
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">while</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@eof</span>
    <span class="ruby-identifier">line</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@eof</span>
    <span class="ruby-string">&quot;EOF\n&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- gets-source -->
          
        </div>

        

        
      </div><!-- gets-method -->

    
      <div id="method-i-join_reading_thread" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join_reading_thread</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method can be used to join the reading thread in some place of the
script</p>
          
          

          
          <div class="method-source-code" id="join_reading_thread-source">
            <pre><span class="ruby-comment"># File lib/output_reader.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">join_reading_thread</span>
  <span class="ruby-ivar">@reading_thread</span>.<span class="ruby-identifier">join</span> 
<span class="ruby-keyword">end</span></pre>
          </div><!-- join_reading_thread-source -->
          
        </div>

        

        
      </div><!-- join_reading_thread-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

